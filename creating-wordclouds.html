
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/monokai.min.css">


  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">

    <link rel="stylesheet" type="text/css" href="./static/custom.css">

    <link href="http://dchess.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="dchess Atom">


    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  


 

<meta name="author" content="dc.hess@gmail.com" />
<meta name="description" content="Using python to turn paragraph text into word clouds" />
<meta name="keywords" content="">


  <meta property="og:site_name" content="dchess"/>
  <meta property="og:title" content="Creating WordClouds"/>
  <meta property="og:description" content="Using python to turn paragraph text into word clouds"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./creating-wordclouds.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2021-02-04 21:00:00-07:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="./author/dchessgmailcom.html">
  <meta property="article:section" content="Tutorial"/>
  <meta property="og:image" content="/images/profile.jpg">

  <title>dchess &ndash; Creating WordClouds</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="./">
        <img src="/images/profile.jpg" alt="D.C. Hess" title="D.C. Hess">
      </a>

      <h1>
        <a href="./">D.C. Hess</a>
      </h1>

<p>Software Engineer</p>

      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="./pages/about-me.html#about-me">
                  About Me
                </a>
              </li>

            <li>
              <a target="_self" href="https://drive.google.com/file/d/1O0-Le26SdL-DhDo2LsOQVWR5BAV4I17F/view" >resume</a>
            </li>
            <li>
              <a target="_self" href="https://sqlsorcery.readthedocs.io/en/latest/" >SQLSorcery</a>
            </li>
        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-github" href="https://www.github.com/dchess" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/dc_hess" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/dchess" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="./">Home</a>

      <a href="/category/projects.html">Projects</a>
      <a href="/category/tutorial.html">Tutorial</a>

      <a href="http://dchess.github.io/feeds/all.atom.xml">Atom</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="creating-wordclouds">Creating WordClouds</h1>
    <p>
      Posted on Thu 04 February 2021 in <a href="./category/tutorial.html">Tutorial</a>

    </p>
  </header>


  <div>
    <p>Text analysis is hard, but one simple visual tool for extracting insights from dense text are word clouds. Word clouds help identify patterns in the preponderance of certain words in a body of text or within many bodies of text. The more frequently a word appears, the larger the word appears in the word cloud.</p>
<p>But manually stripping words from paragraphs of text one by one is time consuming and mind-numbing. In the immortal words of <a href="https://www.youtube.com/watch?v=UANN2Eu6ZnM&amp;feature=youtu.be">Raymond Hettinger</a>: <em>"There must be a better way!"</em></p>
<h2>Generating Some Text</h2>
<p>To start, let's create a bunch of text to generate a word cloud from. Using the <a href="https://faker.readthedocs.io/en/master/">Faker</a> package, we can create a single column dataframe where each row contains a paragraph of fake/non-sensical text.</p>
<p>From there, we'll explore a simple way to parse out the frequency of individual words.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Faker</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">fake</span> <span class="o">=</span> <span class="n">Faker</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Loop over a range of 5000 records and generate a random paragraph in a key:value pair.</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5000</span><span class="p">):</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">fake</span><span class="o">.</span><span class="n">paragraph</span><span class="p">(</span><span class="n">variable_nb_sentences</span><span class="o">=</span><span class="kc">True</span><span class="p">)))</span>

<span class="c1"># Convert that list of dictionaries into a pandas dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Forget trip paper and Mr around lot.</td>
    </tr>
    <tr>
      <th>1</th>
      <td>His include painting success amount child. Who...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Every keep them against build ask. Practice fo...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Worker run particular fish officer son. Reason...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Rest environment must word. Allow brother bene...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>4995</th>
      <td>Product activity paper power factor. Challenge...</td>
    </tr>
    <tr>
      <th>4996</th>
      <td>Choice consider deep quality right wrong. Rece...</td>
    </tr>
    <tr>
      <th>4997</th>
      <td>Kid car hotel field. So employee degree air de...</td>
    </tr>
    <tr>
      <th>4998</th>
      <td>Station authority benefit despite whether. Mov...</td>
    </tr>
    <tr>
      <th>4999</th>
      <td>Daughter ability player.</td>
    </tr>
  </tbody>
</table>
<p>5000 rows Ã— 1 columns</p>
</div>

<p>This gives us a dataframe of 5000 paragraphs to work with. Not something I'd want to do manually!</p>
<h2>Splitting Paragraphs into Words</h2>
<p><em>Admittedly, there may be a more performant way to do this in pandas using vectorization instead of iterating row by row (sort of a no-no in dataframes), but I'm going to keep this simple and concise.</em></p>
<blockquote>
<p>Iterating through pandas objects is generally slow. In many cases, iterating manually over the rows is not needed and can be avoided (using) a vectorized solution: many operations can be performed using built-in methods or NumPy functions, (boolean) indexing.</p>
</blockquote>
<p>The general approach here is to create a list to hold our extracted words (<code>word_list</code>), then loop over each paragraph in the dataframe, splitting each word from the paragraph into an item in a list of its own. Then before looping to the next row, extending the original list<sup>*</sup>. </p>
<p><sup>*</sup> <a href="https://stackoverflow.com/questions/252703/what-is-the-difference-between-pythons-list-methods-append-and-extend">Python extend vs append</a></p>
<div class="highlight"><pre><span></span><code><span class="n">word_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="c1"># Strip out periods and make all words lowercase</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="n">word_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="c1"># Show the first 10 records as example</span>
<span class="nb">print</span><span class="p">(</span><span class="n">word_list</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span> 
</code></pre></div>

<div class="highlight"><pre><span></span><code>[<span class="s1">&#39;forget&#39;</span>,<span class="w"> </span><span class="s1">&#39;trip&#39;</span>,<span class="w"> </span><span class="s1">&#39;paper&#39;</span>,<span class="w"> </span><span class="s1">&#39;and&#39;</span>,<span class="w"> </span><span class="s1">&#39;mr&#39;</span>,<span class="w"> </span><span class="s1">&#39;around&#39;</span>,<span class="w"> </span><span class="s1">&#39;lot&#39;</span>,<span class="w"> </span><span class="s1">&#39;his&#39;</span>,<span class="w"> </span><span class="s1">&#39;include&#39;</span>,<span class="w"> </span><span class="s1">&#39;painting&#39;</span>]
</code></pre></div>

<p>Then we'll convert that list into a dataframe and name the column <strong>word</strong> for easier reference later.</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;word&quot;</span><span class="p">:</span> <span class="n">word_list</span><span class="p">})</span>
<span class="n">df2</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>word</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>forget</td>
    </tr>
    <tr>
      <th>1</th>
      <td>trip</td>
    </tr>
    <tr>
      <th>2</th>
      <td>paper</td>
    </tr>
    <tr>
      <th>3</th>
      <td>and</td>
    </tr>
    <tr>
      <th>4</th>
      <td>mr</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>69266</th>
      <td>care</td>
    </tr>
    <tr>
      <th>69267</th>
      <td>talk</td>
    </tr>
    <tr>
      <th>69268</th>
      <td>daughter</td>
    </tr>
    <tr>
      <th>69269</th>
      <td>ability</td>
    </tr>
    <tr>
      <th>69270</th>
      <td>player</td>
    </tr>
  </tbody>
</table>
<p>69271 rows Ã— 1 columns</p>
</div>

<h2>Data Source</h2>
<p>At this point we could load this dataframe into a database (perhaps using <a href="https://sqlsorcery.readthedocs.io/en/latest/">SQLSorcery</a> or similar tool) and move on to creating a word cloud in a data viz tool like <a href="https://kb.tableau.com/articles/howto/creating-a-word-cloud">Tableau</a>.</p>
<p>But it would be neat to also do this in python while we're at it!</p>
<h2>Word cloud</h2>
<p>After installing the <a href="https://pypi.org/project/wordcloud/">wordcloud</a> package, we can load our dataframe in and begin visualizing. We'll want to remove some common words that won't give us much insight (such as pronouns, conjunctions, and similar filler). For a full list of what we'll filter out, see below.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span><span class="p">,</span> <span class="n">STOPWORDS</span>

<span class="nb">print</span><span class="p">(</span><span class="n">STOPWORDS</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>{<span class="s1">&#39;over&#39;</span>,<span class="w"> </span><span class="s2">&quot;he&#39;d&quot;</span>,<span class="w"> </span><span class="s1">&#39;we&#39;</span>,<span class="w"> </span><span class="s1">&#39;some&#39;</span>,<span class="w"> </span><span class="s1">&#39;k&#39;</span>,<span class="w"> </span><span class="s1">&#39;further&#39;</span>,<span class="w"> </span><span class="s1">&#39;yours&#39;</span>,<span class="w"> </span><span class="s1">&#39;has&#39;</span>,<span class="w"> </span><span class="s2">&quot;she&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;otherwise&#39;</span>,<span class="w"> </span><span class="s2">&quot;she&#39;ll&quot;</span>,<span class="w"> </span><span class="s2">&quot;he&#39;s&quot;</span>,<span class="w"> </span><span class="s2">&quot;i&#39;ll&quot;</span>,<span class="w"> </span><span class="s1">&#39;so&#39;</span>,<span class="w"> </span><span class="s1">&#39;being&#39;</span>,<span class="w"> </span><span class="s1">&#39;to&#39;</span>,<span class="w"> </span><span class="s1">&#39;are&#39;</span>,<span class="w"> </span><span class="s2">&quot;weren&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;each&#39;</span>,<span class="w"> </span><span class="s1">&#39;by&#39;</span>,<span class="w"> </span><span class="s1">&#39;why&#39;</span>,<span class="w"> </span><span class="s1">&#39;that&#39;</span>,<span class="w"> </span><span class="s1">&#39;were&#39;</span>,<span class="w"> </span><span class="s1">&#39;all&#39;</span>,<span class="w"> </span><span class="s1">&#39;through&#39;</span>,<span class="w"> </span><span class="s1">&#39;than&#39;</span>,<span class="w"> </span><span class="s1">&#39;such&#39;</span>,<span class="w"> </span><span class="s1">&#39;the&#39;</span>,<span class="w"> </span><span class="s1">&#39;about&#39;</span>,<span class="w"> </span><span class="s1">&#39;their&#39;</span>,<span class="w"> </span><span class="s1">&#39;between&#39;</span>,<span class="w"> </span><span class="s1">&#39;most&#39;</span>,<span class="w"> </span><span class="s1">&#39;ours&#39;</span>,<span class="w"> </span><span class="s1">&#39;then&#39;</span>,<span class="w"> </span><span class="s1">&#39;same&#39;</span>,<span class="w"> </span><span class="s1">&#39;or&#39;</span>,<span class="w"> </span><span class="s1">&#39;like&#39;</span>,<span class="w"> </span><span class="s1">&#39;above&#39;</span>,<span class="w"> </span><span class="s2">&quot;couldn&#39;t&quot;</span>,<span class="w"> </span><span class="s2">&quot;won&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;would&#39;</span>,<span class="w"> </span><span class="s1">&#39;who&#39;</span>,<span class="w"> </span><span class="s1">&#39;they&#39;</span>,<span class="w"> </span><span class="s1">&#39;was&#39;</span>,<span class="w"> </span><span class="s1">&#39;where&#39;</span>,<span class="w"> </span><span class="s2">&quot;hasn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;since&#39;</span>,<span class="w"> </span><span class="s1">&#39;other&#39;</span>,<span class="w"> </span><span class="s1">&#39;them&#39;</span>,<span class="w"> </span><span class="s1">&#39;when&#39;</span>,<span class="w"> </span><span class="s2">&quot;wouldn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;herself&#39;</span>,<span class="w"> </span><span class="s1">&#39;itself&#39;</span>,<span class="w"> </span><span class="s2">&quot;shouldn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;else&#39;</span>,<span class="w"> </span><span class="s1">&#39;myself&#39;</span>,<span class="w"> </span><span class="s1">&#39;under&#39;</span>,<span class="w"> </span><span class="s1">&#39;only&#39;</span>,<span class="w"> </span><span class="s2">&quot;they&#39;re&quot;</span>,<span class="w"> </span><span class="s1">&#39;if&#39;</span>,<span class="w"> </span><span class="s2">&quot;it&#39;s&quot;</span>,<span class="w"> </span><span class="s2">&quot;when&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;she&#39;</span>,<span class="w"> </span><span class="s1">&#39;there&#39;</span>,<span class="w"> </span><span class="s1">&#39;here&#39;</span>,<span class="w"> </span><span class="s1">&#39;r&#39;</span>,<span class="w"> </span><span class="s1">&#39;how&#39;</span>,<span class="w"> </span><span class="s1">&#39;these&#39;</span>,<span class="w"> </span><span class="s1">&#39;against&#39;</span>,<span class="w"> </span><span class="s2">&quot;here&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;no&#39;</span>,<span class="w"> </span><span class="s1">&#39;theirs&#39;</span>,<span class="w"> </span><span class="s1">&#39;doing&#39;</span>,<span class="w"> </span><span class="s1">&#39;ever&#39;</span>,<span class="w"> </span><span class="s1">&#39;at&#39;</span>,<span class="w"> </span><span class="s1">&#39;her&#39;</span>,<span class="w"> </span><span class="s1">&#39;more&#39;</span>,<span class="w"> </span><span class="s2">&quot;you&#39;re&quot;</span>,<span class="w"> </span><span class="s1">&#39;until&#39;</span>,<span class="w"> </span><span class="s2">&quot;what&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;me&#39;</span>,<span class="w"> </span><span class="s1">&#39;shall&#39;</span>,<span class="w"> </span><span class="s2">&quot;we&#39;d&quot;</span>,<span class="w"> </span><span class="s1">&#39;cannot&#39;</span>,<span class="w"> </span><span class="s2">&quot;i&#39;d&quot;</span>,<span class="w"> </span><span class="s1">&#39;www&#39;</span>,<span class="w"> </span><span class="s1">&#39;he&#39;</span>,<span class="w"> </span><span class="s1">&#39;can&#39;</span>,<span class="w"> </span><span class="s1">&#39;very&#39;</span>,<span class="w"> </span><span class="s1">&#39;it&#39;</span>,<span class="w"> </span><span class="s2">&quot;they&#39;ve&quot;</span>,<span class="w"> </span><span class="s1">&#39;once&#39;</span>,<span class="w"> </span><span class="s1">&#39;been&#39;</span>,<span class="w"> </span><span class="s1">&#39;and&#39;</span>,<span class="w"> </span><span class="s2">&quot;isn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;therefore&#39;</span>,<span class="w"> </span><span class="s1">&#39;i&#39;</span>,<span class="w"> </span><span class="s1">&#39;could&#39;</span>,<span class="w"> </span><span class="s1">&#39;is&#39;</span>,<span class="w"> </span><span class="s1">&#39;him&#39;</span>,<span class="w"> </span><span class="s1">&#39;hence&#39;</span>,<span class="w"> </span><span class="s2">&quot;mustn&#39;t&quot;</span>,<span class="w"> </span><span class="s2">&quot;we&#39;ll&quot;</span>,<span class="w"> </span><span class="s2">&quot;he&#39;ll&quot;</span>,<span class="w"> </span><span class="s2">&quot;i&#39;m&quot;</span>,<span class="w"> </span><span class="s1">&#39;up&#39;</span>,<span class="w"> </span><span class="s1">&#39;with&#39;</span>,<span class="w"> </span><span class="s1">&#39;be&#39;</span>,<span class="w"> </span><span class="s1">&#39;too&#39;</span>,<span class="w"> </span><span class="s1">&#39;while&#39;</span>,<span class="w"> </span><span class="s1">&#39;whom&#39;</span>,<span class="w"> </span><span class="s1">&#39;your&#39;</span>,<span class="w"> </span><span class="s1">&#39;again&#39;</span>,<span class="w"> </span><span class="s1">&#39;com&#39;</span>,<span class="w"> </span><span class="s2">&quot;let&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;have&#39;</span>,<span class="w"> </span><span class="s1">&#39;in&#39;</span>,<span class="w"> </span><span class="s1">&#39;few&#39;</span>,<span class="w"> </span><span class="s1">&#39;own&#39;</span>,<span class="w"> </span><span class="s2">&quot;we&#39;re&quot;</span>,<span class="w"> </span><span class="s1">&#39;below&#39;</span>,<span class="w"> </span><span class="s2">&quot;don&#39;t&quot;</span>,<span class="w"> </span><span class="s2">&quot;you&#39;ll&quot;</span>,<span class="w"> </span><span class="s1">&#39;his&#39;</span>,<span class="w"> </span><span class="s2">&quot;they&#39;ll&quot;</span>,<span class="w"> </span><span class="s1">&#39;however&#39;</span>,<span class="w"> </span><span class="s2">&quot;shan&#39;t&quot;</span>,<span class="w"> </span><span class="s2">&quot;we&#39;ve&quot;</span>,<span class="w"> </span><span class="s2">&quot;can&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;during&#39;</span>,<span class="w"> </span><span class="s1">&#39;having&#39;</span>,<span class="w"> </span><span class="s1">&#39;not&#39;</span>,<span class="w"> </span><span class="s1">&#39;yourself&#39;</span>,<span class="w"> </span><span class="s1">&#39;you&#39;</span>,<span class="w"> </span><span class="s1">&#39;yourselves&#39;</span>,<span class="w"> </span><span class="s2">&quot;how&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;ought&#39;</span>,<span class="w"> </span><span class="s1">&#39;any&#39;</span>,<span class="w"> </span><span class="s2">&quot;that&#39;s&quot;</span>,<span class="w"> </span><span class="s2">&quot;you&#39;ve&quot;</span>,<span class="w"> </span><span class="s1">&#39;ourselves&#39;</span>,<span class="w"> </span><span class="s1">&#39;on&#39;</span>,<span class="w"> </span><span class="s1">&#39;because&#39;</span>,<span class="w"> </span><span class="s1">&#39;should&#39;</span>,<span class="w"> </span><span class="s1">&#39;also&#39;</span>,<span class="w"> </span><span class="s1">&#39;for&#39;</span>,<span class="w"> </span><span class="s2">&quot;she&#39;d&quot;</span>,<span class="w"> </span><span class="s1">&#39;into&#39;</span>,<span class="w"> </span><span class="s1">&#39;this&#39;</span>,<span class="w"> </span><span class="s2">&quot;where&#39;s&quot;</span>,<span class="w"> </span><span class="s2">&quot;i&#39;ve&quot;</span>,<span class="w"> </span><span class="s2">&quot;why&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;out&#39;</span>,<span class="w"> </span><span class="s1">&#39;himself&#39;</span>,<span class="w"> </span><span class="s1">&#39;am&#39;</span>,<span class="w"> </span><span class="s1">&#39;do&#39;</span>,<span class="w"> </span><span class="s2">&quot;aren&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;down&#39;</span>,<span class="w"> </span><span class="s1">&#39;what&#39;</span>,<span class="w"> </span><span class="s1">&#39;its&#39;</span>,<span class="w"> </span><span class="s1">&#39;those&#39;</span>,<span class="w"> </span><span class="s2">&quot;doesn&#39;t&quot;</span>,<span class="w"> </span><span class="s2">&quot;wasn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;of&#39;</span>,<span class="w"> </span><span class="s1">&#39;an&#39;</span>,<span class="w"> </span><span class="s2">&quot;haven&#39;t&quot;</span>,<span class="w"> </span><span class="s2">&quot;there&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;get&#39;</span>,<span class="w"> </span><span class="s2">&quot;didn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;themselves&#39;</span>,<span class="w"> </span><span class="s1">&#39;but&#39;</span>,<span class="w"> </span><span class="s1">&#39;my&#39;</span>,<span class="w"> </span><span class="s1">&#39;both&#39;</span>,<span class="w"> </span><span class="s2">&quot;they&#39;d&quot;</span>,<span class="w"> </span><span class="s1">&#39;did&#39;</span>,<span class="w"> </span><span class="s1">&#39;our&#39;</span>,<span class="w"> </span><span class="s2">&quot;hadn&#39;t&quot;</span>,<span class="w"> </span><span class="s1">&#39;from&#39;</span>,<span class="w"> </span><span class="s2">&quot;who&#39;s&quot;</span>,<span class="w"> </span><span class="s1">&#39;off&#39;</span>,<span class="w"> </span><span class="s1">&#39;nor&#39;</span>,<span class="w"> </span><span class="s1">&#39;before&#39;</span>,<span class="w"> </span><span class="s1">&#39;had&#39;</span>,<span class="w"> </span><span class="s1">&#39;a&#39;</span>,<span class="w"> </span><span class="s1">&#39;after&#39;</span>,<span class="w"> </span><span class="s1">&#39;which&#39;</span>,<span class="w"> </span><span class="s1">&#39;as&#39;</span>,<span class="w"> </span><span class="s2">&quot;you&#39;d&quot;</span>,<span class="w"> </span><span class="s1">&#39;just&#39;</span>,<span class="w"> </span><span class="s1">&#39;hers&#39;</span>,<span class="w"> </span><span class="s1">&#39;does&#39;</span>,<span class="w"> </span><span class="s1">&#39;http&#39;</span>}
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span><span class="p">,</span> <span class="n">STOPWORDS</span>


<span class="c1"># Create a word cloud with resolution of 1200 x 800 with a black background</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df2</span><span class="o">.</span><span class="n">word</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
    <span class="n">background_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
    <span class="n">stopwords</span><span class="o">=</span><span class="n">STOPWORDS</span><span class="p">)</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>

<p>At this point we could spit this out to an image for presentation.</p>
<div class="highlight"><pre><span></span><code><span class="n">wordcloud</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">&quot;wordcloud.jpg&quot;</span><span class="p">)</span>
</code></pre></div>

<p>But we could also use a plotting library like <a href="https://matplotlib.org/">matplotlib</a> to build a visualization with our wordcloud.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>

<p><img alt="svg" src="word-cloud_files/word-cloud_11_0.svg"></p>
<h2>Conclusion</h2>
<p>And there we have it. <strong>A simple, repeatable method for extracting word frequency from paragraph text for use in generating word clouds.</strong></p>
<p>It really only required about 5 lines of code to extract the data:</p>
<div class="highlight"><pre><span></span><code><span class="n">word_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="n">word_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;word&quot;</span><span class="p">:</span> <span class="n">word_list</span><span class="p">})</span>
</code></pre></div>

<p>And only another 10 or so to actually create a word cloud visualization as well!</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " dchess ",
  "url" : ".",
  "image": "/images/profile.jpg",
  "description": "Code, code, and more code"
}
</script>

</body>
</html>